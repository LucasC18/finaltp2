@host = http://localhost:3000
@contentType = application/json

################################################
# üîê AUTH ‚Äî LOGIN (JWT)
################################################

### Login (obtener token)
# @name login
POST {{host}}/api/v1/auth/login
Content-Type: {{contentType}}

{
  "username": "lucas"
}

### Guardar token JWT
@token = {{login.response.body.token}}

################################################
# üì¶ PRODUCTOS ‚Äî CREATE
################################################

### Crear producto (sin auth)
# @name createProduct
POST {{host}}/api/v1/productos
Content-Type: {{contentType}}

{
  "producto": "Tornillos",
  "stockAmount": 40
}

### Guardar ID del producto
@productId = {{createProduct.response.body._id}}

################################################
# üìÑ PRODUCTOS ‚Äî GET ALL
################################################

### Listar productos
GET {{host}}/api/v1/productos
Accept: application/json

################################################
# üîç PRODUCTOS ‚Äî GET BY ID
################################################

### Obtener producto por ID
GET {{host}}/api/v1/productos/{{productId}}
Accept: application/json

################################################
# ‚úèÔ∏è PRODUCTOS ‚Äî UPDATE (CON JWT)
################################################

### Update producto (JWT requerido)
PUT {{host}}/api/v1/productos/{{productId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "stockAmount": 20
}

################################################
# ‚ùå PRODUCTOS ‚Äî UPDATE SIN JWT (DEBE FALLAR)
################################################

### Update sin JWT
PUT {{host}}/api/v1/productos/{{productId}}
Content-Type: {{contentType}}

{
  "stockAmount": 30
}

################################################
# üóëÔ∏è PRODUCTOS ‚Äî DELETE (CON JWT)
################################################

### Delete producto (JWT requerido)
DELETE {{host}}/api/v1/productos/{{productId}}
Authorization: Bearer {{token}}

################################################
# ‚ùå PRODUCTOS ‚Äî DELETE SIN JWT (DEBE FALLAR)
################################################

### Delete sin JWT
DELETE {{host}}/api/v1/productos/{{productId}}

################################################
# üìÅ ALBUMS ‚Äî CSV
################################################

### Descargar CSV de albums (sin auth)
GET {{host}}/api/v1/albums/csv

################################################
# üîº INCREMENTAR STOCK (m√≠nimo 1)
################################################

PATCH {{host}}/api/v1/productos/{{productId}}/stock
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "incremento": 1
}

